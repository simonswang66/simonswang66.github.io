<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>XXX公司XXX项目工作流地图</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet">
  <style>
    body {
      background: #f7f8fa;
      font-family: 'Source Sans Pro', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      color: #23272f;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 32px 24px 0 24px;
    }
    h1 {
      text-align: center;
      font-size: 2.2rem;
      font-weight: 600;
      letter-spacing: .06em;
      margin-bottom: 60px;
      color: #243047;
    }
    .workflow-map {
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
      position: relative;
      height: 370px;
      background: transparent;
      user-select: none;
    }
    .nodesvg {
      width: 100%;
      height: 370px;
      display: block;
      overflow: visible;
    }
    .workflow-node {
      cursor: pointer;
      transition: filter 0.2s;
    }
    .workflow-node:hover {
      filter: brightness(1.1) drop-shadow(0 2px 8px rgba(60,110,200,0.15));
    }
    .workflow-label {
      text-anchor: middle;
      dominant-baseline: middle;
      font-size: 1.5rem;
      font-weight: 700;
      fill: #243047;
      pointer-events:none;
      font-family: 'Source Sans Pro', Arial, sans-serif;
      filter: drop-shadow(0 1px 0 #fff9);
    }
    /* 动画 */
    .fade-in {
      animation: fadein 0.45s;
    }
    .fade-out {
      animation: fadeout 0.35s;
    }
    @keyframes fadein {
      from { opacity: 0; transform: scale(0.97);}
      to { opacity: 1; transform: scale(1);}
    }
    @keyframes fadeout {
      from { opacity: 1;}
      to { opacity: 0;}
    }
    .zoom-in-view {
      animation: zoomin 0.45s;
    }
    .zoom-out-view {
      animation: zoomout 0.36s;
    }
    @keyframes zoomin {
      from { opacity: 0; transform: scale(0.86);}
      to { opacity: 1; transform: scale(1);}
    }
    @keyframes zoomout {
      from { opacity: 1;}
      to { opacity: 0.82;}
    }
    /* 二级节点页面 */
    .subpage {
      display: none;
      position: absolute;
      top: 0; left: 0; right: 0;
      background: #fff;
      min-height: 340px;
      border-radius: 18px;
      box-shadow: 0 8px 40px -12px rgba(32,55,110,0.08);
      padding: 36px 30px 40px 36px;
      z-index: 9;
      margin-top: 18px;
    }
    .subpage.active {
      display: block;
    }
    .subpage-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 28px;
      color: #205689;
      letter-spacing: 2px;
    }
    .subpage-back {
      background: none;
      border: none;
      color: #7599b6;
      font-size: 1.08rem;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 14px;
      transition: color 0.18s;
      padding: 0;
      outline: none;
    }
    .subpage-back:hover {
      color: #194379;
      text-decoration: underline;
    }
    /* 二级节点卡片 */
    .sub-nodes-list {
      display: flex;
      flex-wrap: wrap;
      gap: 16px 4%;
      margin: 0;
      padding: 0;
    }
    .sub-node-card {
      background:
        linear-gradient(90deg, #fafbfc 70%, #ebeef3);
      border-radius: 12px;
      box-shadow: 0 1.5px 7px -2px rgba(59,72,110,0.08);
      padding: 20px 22px 20px 22px;
      flex: 0 0 47%;
      min-width: 230px;
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      transition: box-shadow 0.22s;
      cursor: pointer;
    }
    .sub-node-card:hover {
      box-shadow: 0 4px 32px -8px #90cbee22;
      background:linear-gradient(90deg,#f0f3f6 60%, #e3e6ee 100%);
    }
    .sub-node-name {
      font-size: 1.07rem;
      font-weight: 600;
      color: #396399;
      background: #e5eef8;
      border-radius: 9px;
      padding: 5px 13px;
      min-width: 44px;
      margin-right: 18px;
      text-align: center;
      letter-spacing:1px;
    }
    .sub-node-info {
      text-align: right;
      flex: 1;
      min-width: 0;
    }
    .sub-node-desc, .sub-node-role {
      display: block;
    }
    .sub-node-desc {
      font-size: 1.03rem;
      color: #547292;
      line-height: 1.46;
      font-weight: 400;
      max-width: 185px;
      margin-bottom: 6px;
      margin-left: auto;
    }
    .sub-node-role {
      font-size: .97rem;
      color: #888f99;
      background: #e8e6fa;
      border-radius: 7px;
      padding: 2px 10px;
      display: inline-block;
      margin-top: 2px;
      letter-spacing:1px;
      margin-left: auto;
    }
    @media (max-width: 750px) {
      .container {
        padding: 18px 2vw;
      }
      .workflow-map{
        height: 270px;
      }
      .nodesvg{
        height: 270px;
      }
      .subpage{
        padding: 20px 7px 28px 12px;
        min-height: 200px;
      }
      .sub-nodes-list{
        gap: 9px 0;
      }
      .sub-node-card{
        padding:10px 7px 10px 10px;
        flex: 0 0 98%;
        min-width: 0;
      }
      .sub-node-name{
        min-width: 36px;
        margin-right: 9px;
        font-size: 0.95rem;
      }
      .sub-node-desc{
        font-size: .95rem;
        max-width: 96px;
      }
      .sub-node-role{
        font-size: .90rem;
        padding: 2px 7px;
      }
      .workflow-label {
        font-size: 1.13rem;
      }
      .sub-node-info {
        text-align: right;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>XXX公司XXX项目工作流地图</h1>
    <!-- 首页 S型曲线与节点 -->
    <div class="workflow-map" id="workflowMap">
      <svg class="nodesvg" viewBox="0 0 900 370">
        <!-- S 曲线穿过所有圆心 -->
        <defs>
          <linearGradient id="lineGrad" x1="0" x2="1" y1="0" y2="0">
            <stop offset="0%"  stop-color="#82B4F7" stop-opacity="0.85"/>
            <stop offset="50%" stop-color="#7be3d5" stop-opacity="0.82"/>
            <stop offset="100%" stop-color="#C5B6F9" stop-opacity="0.77"/>
          </linearGradient>
        </defs>
        <!-- 
          节点坐标: 
            Init     (115,245)
            Process  (300,90)
            Review   (545,245)
            Complete (785,80)
        -->
        <path 
          d="M 115 245
             C 180 180, 220 115, 300 90
             S 480 250, 545 245
             S 790 90, 785 80"
          stroke="url(#lineGrad)"
          stroke-width="14"
          fill="none"
          stroke-linecap="round"
          opacity="0.93"
        ></path>
        <!-- 圆心与曲线一致 -->
        <g class="workflow-node" data-node="Init"     style="transition:all .2s;">
          <circle cx="115" cy="245" r="48" fill="#b4d4f6" stroke="#7bb2e3" stroke-width="8"/>
          <text x="115" y="245" class="workflow-label">Init</text>
        </g>
        <g class="workflow-node" data-node="Process"  style="transition:all .2s;">
          <circle cx="300" cy="90" r="48" fill="#b3f7e2" stroke="#4fdac3" stroke-width="8"/>
          <text x="300" y="90" class="workflow-label">Process</text>
        </g>
        <g class="workflow-node" data-node="Review"   style="transition:all .2s;">
          <circle cx="545" cy="245" r="48" fill="#d7cffe" stroke="#9977f7" stroke-width="8"/>
          <text x="545" y="245" class="workflow-label">Review</text>
        </g>
        <g class="workflow-node" data-node="Complete" style="transition:all .2s;">
          <circle cx="785" cy="80"  r="48" fill="#f8dac3" stroke="#eea057" stroke-width="8"/>
          <text x="785" y="80" class="workflow-label">Complete</text>
        </g>
      </svg>
    </div>
    <!-- 四个二级页面 -->
    <div id="subpage-Init" class="subpage">
      <button class="subpage-back" onclick="showHome()">← 返回工作流地图</button>
      <div class="subpage-title">Init</div>
      <div class="sub-nodes-list"></div>
    </div>
    <div id="subpage-Process" class="subpage">
      <button class="subpage-back" onclick="showHome()">← 返回工作流地图</button>
      <div class="subpage-title">Process</div>
      <div class="sub-nodes-list"></div>
    </div>
    <div id="subpage-Review" class="subpage">
      <button class="subpage-back" onclick="showHome()">← 返回工作流地图</button>
      <div class="subpage-title">Review</div>
      <div class="sub-nodes-list"></div>
    </div>
    <div id="subpage-Complete" class="subpage">
      <button class="subpage-back" onclick="showHome()">← 返回工作流地图</button>
      <div class="subpage-title">Complete</div>
      <div class="sub-nodes-list"></div>
    </div>
  </div>
  <script>
    // 子节点数据可拓展，每个节点10个，配置名称/描述/角色
    const nodeDefs = {
      'Init': [
        {name:'1-1',desc:'流程发起：准备项目信息',role:'项目经理'},
        {name:'1-2',desc:'部门初步会签',role:'各部门代表'},
        {name:'1-3',desc:'收集必备资料',role:'行政专员'},
        {name:'1-4',desc:'业务初审',role:'业务审核员'},
        {name:'1-5',desc:'流程责任人确认',role:'流程管理员'},
        {name:'1-6',desc:'项目目标设定',role:'项目经理'},
        {name:'1-7',desc:'关键节点列举',role:'业务专员'},
        {name:'1-8',desc:'输入处理数据',role:'数据专员'},
        {name:'1-9',desc:'预算初步核查',role:'财务部门'},
        {name:'1-10',desc:'项目初始化完成',role:'项目经理'}
      ],
      'Process': [
        {name:'2-1',desc:'流程执行计划',role:'项目经理'},
        {name:'2-2',desc:'任务分配',role:'各部门主管'},
        {name:'2-3',desc:'进度记录',role:'项目助理'},
        {name:'2-4',desc:'内部沟通',role:'各部门成员'},
        {name:'2-5',desc:'遇到问题反馈',role:'协同成员'},
        {name:'2-6',desc:'风险应对',role:'风险管理员'},
        {name:'2-7',desc:'资源协调',role:'行政'},
        {name:'2-8',desc:'阶段性检查',role:'业务审核员'},
        {name:'2-9',desc:'外部对接',role:'合作方'},
        {name:'2-10',desc:'文档管理',role:'项目助理'}
      ],
      'Review': [
        {name:'3-1',desc:'材料归档',role:'行政专员'},
        {name:'3-2',desc:'成果核查',role:'业务审核员'},
        {name:'3-3',desc:'阶段总结',role:'项目经理'},
        {name:'3-4',desc:'预算复查',role:'财务部门'},
        {name:'3-5',desc:'内部评审',role:'评审小组'},
        {name:'3-6',desc:'复核修改',role:'项目组成员'},
        {name:'3-7',desc:'审批流转',role:'流程管理员'},
        {name:'3-8',desc:'外部复查',role:'合作方'},
        {name:'3-9',desc:'用户意见收集',role:'客户代表'},
        {name:'3-10',desc:'评估报告输出',role:'评审小组'}
      ],
      'Complete': [
        {name:'4-1',desc:'工作归档',role:'行政专员'},
        {name:'4-2',desc:'项目成果发布',role:'项目经理'},
        {name:'4-3',desc:'成果复盘',role:'全体成员'},
        {name:'4-4',desc:'客户反馈',role:'客户代表'},
        {name:'4-5',desc:'总结分享',role:'流程管理员'},
        {name:'4-6',desc:'经验沉淀',role:'项目组成员'},
        {name:'4-7',desc:'档案移交',role:'行政'},
        {name:'4-8',desc:'项目完结确认',role:'各部门主管'},
        {name:'4-9',desc:'后续跟进计划',role:'项目经理'},
        {name:'4-10',desc:'流程关闭',role:'流程管理员'}
      ]
    };

    // 渲染二级节点卡片
    function renderSubNodes(nodeName){
      const el = document.querySelector('#subpage-'+nodeName+' .sub-nodes-list');
      if(!el) return;
      el.innerHTML='';
      (nodeDefs[nodeName] || []).forEach(item=>{
        const div = document.createElement('div');
        div.className = 'sub-node-card';
        div.innerHTML = `<span class="sub-node-name">${item.name}</span>
        <div class="sub-node-info">
          <div class="sub-node-desc">${item.desc}</div>
          <div class="sub-node-role">${item.role}</div>
        </div>
        `;
        el.appendChild(div);
      });
    }
    // 首次页面加载渲染所有二级页面内容
    ['Init','Process','Review','Complete'].forEach(renderSubNodes);

    // 节点点击，进入二级页面，有zoom过度
    const nodes = document.querySelectorAll('.workflow-node');
    nodes.forEach(node=>{
      node.addEventListener('click',function(e){
        e.preventDefault();
        showSubPage(this.getAttribute('data-node'));
      });
    });

    // 进入二级页面动画
    function showSubPage(nodeName){
      // 淡出主页面
      const workflowMap = document.getElementById('workflowMap');
      workflowMap.classList.remove('fade-in');
      workflowMap.classList.add('fade-out');
      // 延迟显示二级页面
      setTimeout(()=>{
        workflowMap.style.display='none';
        // 显示对应二级页面
        document.querySelectorAll('.subpage').forEach(p=>{
          p.classList.remove('active','zoom-in-view','zoom-out-view');
        });
        const sub = document.getElementById('subpage-'+nodeName);
        sub.style.display = 'block';
        // 约20ms后触发动画
        setTimeout(()=>sub.classList.add('active','zoom-in-view'),20);
      },320);
    }
    // 返回首页
    function showHome(){
      document.querySelectorAll('.subpage').forEach(p=>{
        p.classList.remove('active','zoom-in-view');
        p.classList.add('zoom-out-view');
        setTimeout(()=>p.style.display='none',340);
      });
      setTimeout(()=>{
        const workflowMap = document.getElementById('workflowMap');
        workflowMap.style.display='block';
        workflowMap.classList.remove('fade-out');
        workflowMap.classList.add('fade-in');
      },320);
    }
    // 首屏动画
    window.onload = function(){
      document.getElementById('workflowMap').classList.add('fade-in');
    }
  </script>
</body>
</html>
